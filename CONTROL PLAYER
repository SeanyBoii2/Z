-- StarterPlayerScripts/ChatControl.lua
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- change this to the "owner" display name you want to listen to
local ownerDisplayName = "Superman"

-- helper: get my Humanoid + HumanoidRootPart
local function getSelf()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return char, char:FindFirstChild("Humanoid"), char:FindFirstChild("HumanoidRootPart")
end

-- actions
local function teleportToOwner(owner)
    local _, _, myHRP = getSelf()
    local oChar = owner.Character
    local oHRP = oChar and oChar:FindFirstChild("HumanoidRootPart")
    if myHRP and oHRP then
        myHRP.CFrame = oHRP.CFrame + Vector3.new(0, 3, 0)
    end
end

local function resetSelf()
    local _, humanoid = getSelf()
    if humanoid then
        humanoid.Health = 0
    end
end

local function anchorSelf(toggle)
    local _, _, myHRP = getSelf()
    if myHRP then
        myHRP.Anchored = toggle
    end
end

-- hook up to an owner's chat
local function setup(owner)
    -- avoid duplicate connections
    if owner:GetAttribute("ChatControlConnected") then return end
    owner:SetAttribute("ChatControlConnected", true)

    owner.Chatted:Connect(function(msg)
        msg = msg:lower()

        if msg == "teleport" then
            teleportToOwner(owner)
        elseif msg == "reset" then
            resetSelf()
        elseif msg == "anchor" then
            anchorSelf(true)
        elseif msg == "unanchor" then
            anchorSelf(false)
        end
    end)
end

-- check existing players by DisplayName
for _, plr in ipairs(Players:GetPlayers()) do
    if plr.DisplayName == ownerDisplayName then
        setup(plr)
    end
end

-- check new players
Players.PlayerAdded:Connect(function(plr)
    if plr.DisplayName == ownerDisplayName then
        setup(plr)
    end
end)
